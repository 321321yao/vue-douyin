(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37724660"],{"0a99":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("profile")],1)},n=[],o=(s("7f7f"),s("6762"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile"},[i("me-tab",{directives:[{name:"show",rawName:"v-show",value:t.fiexedtopshow,expression:"fiexedtopshow"}],staticClass:"fiexedtop",attrs:{videoNum:t.videoNum,likeNum:t.likeNum}}),i("div",{staticClass:"backbtn-wrap",class:{showbgcolor:t.fiexedtopshow}},[i("span",{directives:[{name:"show",rawName:"v-show",value:"me"!==this.$route.params.id,expression:"this.$route.params.id !== 'me'"}],staticClass:"backbtn iconfont icon-left",on:{click:function(e){return e.stopPropagation(),t.GoBack(e)}}}),i("p",{staticClass:"name",class:{showname:t.fiexedtopshow},domProps:{textContent:t._s(t.userInfo.userNickname)}}),i("span",{staticClass:"dotbtn iconfont icon-ellipsis"})]),i("div",{staticClass:"background",style:t.bgimgStyle,on:{touchstart:function(t){t.preventDefault()}}},[i("img",{staticClass:"bg",attrs:{src:s("b62d"),alt:""}})]),i("scroll",{ref:"scroll",staticClass:"bottom",attrs:{probeType:3,listenScroll:!0,pullup:!0},on:{scroll:t.scrollHandler,click:function(e){t.showCommentList=!1},scrollToEnd:t.scrollToEnd}},[i("div",{staticClass:"profile"},[i("a",{directives:[{name:"show",rawName:"v-show",value:"me"===this.$route.params.id,expression:"this.$route.params.id === 'me'"}],staticClass:"logout",on:{click:t.logout}},[t._v("logout")]),i("div",{staticClass:"avatar-wrap"},[i("img",{staticClass:"avatar",attrs:{src:""+t.baseURL+t.userInfo.userAvatar,alt:""}})]),i("div",{staticClass:"name-wrap"},[i("p",{staticClass:"name",domProps:{textContent:t._s(t.userInfo.userNickname)}}),i("p",{staticClass:"subname"},[t._v("抖音号："+t._s(t.userInfo.userId))])]),i("div",{staticClass:"desc-wrap"},[i("p",{staticClass:"desc",domProps:{textContent:t._s(t.userInfo.userDesc)}}),i("div",{staticClass:"gender"},[i("div",{staticClass:"icon iconfont",class:["男"===t.userInfo.userGender?"icon-man":"icon-woman"]}),t._v("\r\n            "+t._s(t.userInfo.userAge)+"岁\r\n          ")]),i("div",{staticClass:"num-wrap"},[i("p",[t._v(t._s(t.byLikeNum)+"获赞")]),i("p",{on:{click:t.GoInterestList}},[t._v(t._s(t.followerNum)+"关注")]),i("p",{on:{click:t.GoFanList}},[t._v(t._s(t.fanNum)+"粉丝")])])]),i("div",{staticClass:"wrap"},[i("me-tab",{attrs:{videoNum:t.videoNum,likeNum:t.likeNum}}),i("keep-alive",[i("router-view",{ref:"routerView",attrs:{userInfo:t.userInfo},on:{showCommentList:t.fetchCommentsAndShowList,chooseVideo:t.chooseVideo},nativeOn:{"!click":function(e){return t.closeCommentList(e)}}})],1)],1)])]),i("transition",{attrs:{name:"up"}},[t.showCommentList?i("comment-list",{attrs:{commentList:t.commentList,commentNum:t.commentNum},on:{close:t.closeCommentList,scrollToEnd:t.fetchCommentsAndShowList}}):t._e()],1),i("transition",{attrs:{name:"up"}},[i("play-list",{directives:[{name:"show",rawName:"v-show",value:t.showPlayList,expression:"showPlayList"}],ref:"playList",staticClass:"play-list",on:{close:function(e){t.showPlayList=!1}}})],1)],1)}),a=[],r=(s("96cf"),s("1da1")),c=s("be94"),u=s("e9fc"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab"},[s("router-link",{staticClass:"tab-item",attrs:{tag:"div",to:"./video"}},[s("span",{staticClass:"tab-link"},[t._v("作品 "+t._s(t.videoNum))])]),s("router-link",{staticClass:"tab-item",attrs:{tag:"div",to:"./videoAndDesc"}},[s("span",{staticClass:"tab-link"},[t._v("动态 "+t._s(t.videoNum))])]),s("router-link",{staticClass:"tab-item",attrs:{tag:"div",to:"./likes"}},[s("span",{staticClass:"tab-link"},[t._v("喜欢 "+t._s(t.likeNum))])])],1)},l=[],h=(s("c5f6"),{props:{videoNum:{type:Number,default:0},likeNum:{type:Number,default:0}}}),d=h,f=(s("52a2"),s("2877")),p=Object(f["a"])(d,m,l,!1,null,"0280918c",null);p.options.__file="MeTab.vue";var v=p.exports,g=s("2ce0"),w=s("41ea"),L=s("bc3a"),C=s.n(L),b=s("2f62"),N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{"!click":function(e){t.closeCommentList(e)}}},[s("div",{staticClass:"back iconfont icon-left",on:{click:t.close}}),s("scroll",{ref:"scroll",staticClass:"wrap",attrs:{probeType:3,data:t.playList,scrollEnd:!0,momentum:!1},on:{scrollEnd:t.scrollEnd}},[s("div",t._l(t.playList,function(e){return s("my-video",{key:e.id,attrs:{VideoItem:e},on:{showCommentList:t.fetchCommentsAndShowList}})}))]),s("transition",{attrs:{name:"up"}},[t.showCommentList?s("comment-list",{attrs:{commentList:t.commentList,commentNum:t.commentNum},on:{close:t.closeCommentList,scrollToEnd:t.fetchCommentsAndShowList}}):t._e()],1)],1)},k=[],I=s("656e"),y={data:function(){return{currentY:0,showCommentList:!1,commentNum:0,commentList:[],page:0,currentCommentVideoId:"",isEnd:!1}},methods:Object(c["a"])({scrollEnd:function(t){var e=this.clientHeight;Math.abs(t.y)<this.currentY-e/2&&(this.currentY-=e,this.$refs.scroll.scrollTo(0,-this.currentY)),Math.abs(t.y)<this.currentY+e/2?this.$refs.scroll.scrollTo(0,-this.currentY):(this.currentY+=e,this.$refs.scroll.scrollTo(0,-this.currentY))},fetchCommentsAndShowList:function(t,e){var s=this;if(this.isLogged||(this.showLoginWrap=!0),this.currentCommentVideoId!==t)this.isEnd=!1,this.page=1,this.currentCommentVideoId=t,this.commentNum=e,C.a.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page),{baseURL:w["a"],withCredentials:!0}).then(function(t){t.data.data.length<20&&(s.isEnd=!0),s.commentList=t.data.data,s.showCommentList=!0});else{if(this.page++,this.isEnd)return;C.a.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page),{baseURL:w["a"],withCredentials:!0}).then(function(t){t.data.data.length<20&&(s.isEnd=!0),s.commentList=s.commentList.concat(t.data.data),s.showCommentList=!0})}},scrollToIndex:function(t){this.currentY=t*this.clientHeight,this.$refs.scroll.scrollTo(0,-this.currentY)},close:function(){this.$emit("close")},closeCommentList:function(t){this.showCommentList&&(t.stopPropagation(),this.showCommentList=!1)}},Object(b["b"])(["getPopularVideo"])),computed:Object(c["a"])({clientHeight:function(){return document.body.clientHeight}},Object(b["c"])(["playList"])),components:{MyVideo:I["a"],Scroll:u["a"],CommentList:g["a"]}},_=y,x=(s("12de"),Object(f["a"])(_,N,k,!1,null,"27238e25",null));x.options.__file="PlayList.vue";var E=x.exports,$=C.a.create({baseURL:w["a"],withCredentials:!0}),V=21,O={created:function(){var t=this;if("me"===this.$route.params.id){this.userInfo=this.loginInfo;var e=this.userInfo.userId;this.getFollowerNum(e),this.getFanNum(e),this.getLikeNum(e),this.getVideoNum(e)}else $.get("/api/common/user/".concat(this.$route.params.id,"/getUserInfo")).then(function(e){t.userInfo=e.data.data;var s=t.userInfo.userId;t.getFollowerNum(s),t.getFanNum(s),t.getByLikeNum(s),t.getLikeNum(s),t.getVideoNum(s)})},data:function(){return{baseURL:w["a"],userInfo:{},fanNum:0,likeNum:0,videoNum:0,byLikeNum:0,followerNum:0,bgimgHeight:150,showPlayList:!1,fiexedtopshow:!1,showCommentList:!1,commentList:[],currentCommentVideoId:""}},computed:Object(c["a"])({bgimgStyle:function(){var t=Math.max(150,this.bgimgHeight),e=t/150;return{height:t+"px",transform:"scaleX(".concat(e,")")}}},Object(b["c"])(["loginInfo"])),methods:Object(c["a"])({scrollHandler:function(t){this.showCommentList&&(this.showCommentList=!1,this.currentCommentVideoId="",this.isEnd=!1),t.y>0&&(this.bgimgHeight=t.y+150),t.y<-360?this.fiexedtopshow=!0:this.fiexedtopshow=!1},scrollToEnd:function(){if("profile/likes"===this.$route.name){var t=this.$refs.routerView.page;t*V<this.likeNum&&this.$refs.routerView.fetchLikeList()}else{var e=this.$refs.routerView.page;e*V<this.videoNum&&this.$refs.routerView.fetchLikeList()}},closeCommentList:function(t){this.showCommentList&&(this.currentCommentVideoId="",t.stopPropagation(),this.showCommentList=!1)},fetchCommentsAndShowList:function(t,e){var s=this;if(this.currentCommentVideoId!==t)this.isEnd=!1,this.page=1,this.currentCommentVideoId=t,this.commentNum=e,C.a.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page),{baseURL:w["a"],withCredentials:!0}).then(function(t){t.data.data.length<20&&(s.isEnd=!0),s.commentList=t.data.data,s.showCommentList=!0});else{if(this.page++,this.isEnd)return;C.a.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page),{baseURL:w["a"],withCredentials:!0}).then(function(t){t.data.data.length<20&&(s.isEnd=!0),s.commentList=s.commentList.concat(t.data.data),s.showCommentList=!0})}},GoBack:function(){var t=localStorage.getItem("Routefrom");this.$router.push(t)},GoInterestList:function(){this.$router.push("/InterestList/".concat(this.$route.params.id))},GoFanList:function(){this.$router.push("/FanList/".concat(this.$route.params.id))},chooseVideo:function(t){this.showPlayList=!0,this.$refs.playList.scrollToIndex(t)},logout:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.get("/api/user/".concat(this.loginInfo.userId,"/logout"));case 2:e=t.sent,200===e.data.code&&(this.SET_ISLOGGED(!1),this.SET_LOGININFO({}),this.$router.push("/home"));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getFollowerNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.get("/api/user/".concat(e,"/FollowersNum"));case 2:s=t.sent,200===s.data.code&&(this.followerNum=s.data.data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getFanNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.get("/api/user/".concat(e,"/FansNum"));case 2:s=t.sent,200===s.data.code&&(this.fanNum=s.data.data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getByLikeNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.get("/api/user/".concat(e,"/byLikesNum"));case 2:s=t.sent,200===s.data.code&&(this.byLikeNum=s.data.data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getLikeNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.get("/api/user/".concat(e,"/LikesNum"));case 2:s=t.sent,200===s.data.code&&(this.likeNum=s.data.data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getVideoNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.get("/api/user/".concat(e,"/VideosNum"));case 2:s=t.sent,200===s.data.code&&(this.videoNum=s.data.data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Object(b["d"])(["SET_ISLOGGED","SET_LOGININFO"])),watch:{$route:function(){var t=this;this.showCommentList&&(this.showCommentList=!1),this.$nextTick(function(){t.fiexedtopshow=!1,t.$refs.scroll.refresh()})}},components:{Scroll:u["a"],MeTab:v,CommentList:g["a"],PlayList:E}},R=O,T=(s("551a"),Object(f["a"])(R,o,a,!1,null,"03c1d3ea",null));T.options.__file="Profile.vue";var j=T.exports,S={name:"me",components:{Profile:j},beforeRouteEnter:function(t,e,s){var i=["InterestList","FanList"];i.includes(e.name)||"undefined"!==typeof e.params.id||localStorage.setItem("Routefrom",e.path),s()}},P=S,F=(s("fbe0"),Object(f["a"])(P,i,n,!1,null,"f3edeb86",null));F.options.__file="Me.vue";e["default"]=F.exports},"12de":function(t,e,s){"use strict";var i=s("32ad"),n=s.n(i);n.a},"32ad":function(t,e,s){},"3a77":function(t,e,s){},"52a2":function(t,e,s){"use strict";var i=s("3a77"),n=s.n(i);n.a},"551a":function(t,e,s){"use strict";var i=s("6bd6"),n=s.n(i);n.a},"6bd6":function(t,e,s){},7518:function(t,e,s){},b62d:function(t,e,s){t.exports=s.p+"assets/img/1.a9b784ef.jpg"},fbe0:function(t,e,s){"use strict";var i=s("7518"),n=s.n(i);n.a}}]);